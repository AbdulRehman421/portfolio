let a = {
  message: [
    {
      bookID: "31434",
      title: "The Poetry of Sylvia Plath",
      authors: "Claire Brennan",
      average_rating: "4.25",
      isbn: "0231124279",
      isbn13: "9780231124270",
      language_code: "eng",
      "  num_pages": "202",
      ratings_count: "27",
      text_reviews_count: "0",
      publication_date: "8/29/2001",
      publisher: "Columbia University Press",
    },
    {
      bookID: "33493",
      title: "The Keeper's Companion Vol. 1 (Call of Cthulhu RPG)",
      authors: "Keith Herber/Brian M. Sammons/William Dietze/Chaosium Inc.",
      average_rating: "3.92",
      isbn: "1568821441",
      isbn13: "9781568821443",
      language_code: "eng",
      "  num_pages": "208",
      ratings_count: "65",
      text_reviews_count: "1",
      publication_date: "9/15/2003",
      publisher: "Chaosium",
    },
    {
      bookID: "31582",
      title: "The Selected Poems of Federico Garc\u00eda Lorca",
      authors: "Federico Garc\u00eda Lorca",
      average_rating: "4.32",
      isbn: "0811200914",
      isbn13: "9780811200912",
      language_code: "mul",
      "  num_pages": "180",
      ratings_count: "236",
      text_reviews_count: "23",
      publication_date: "6/1/1955",
      publisher: "New Directions Publishing Corporation",
    },
    {
      bookID: "6667",
      title: "Boy: Tales of Childhood (Roald Dahl's Autobiography  #1)",
      authors: "Roald Dahl/Quentin Blake",
      average_rating: "4.10",
      isbn: "0141311401",
      isbn13: "9780141311401",
      language_code: "eng",
      "  num_pages": "176",
      ratings_count: "45253",
      text_reviews_count: "1934",
      publication_date: "4/5/2001",
      publisher: "Puffin Books",
    },
    {
      bookID: "12564",
      title: "Sometimes a Great Notion",
      authors: "Ken Kesey/Charles Bowden",
      average_rating: "4.17",
      isbn: "0143039865",
      isbn13: "9780143039860",
      language_code: "eng",
      "  num_pages": "715",
      ratings_count: "577",
      text_reviews_count: "80",
      publication_date: "8/29/2006",
      publisher: "Penguin Classics",
    },
    {
      bookID: "10148",
      title: "The Complete Sherlock Holmes  Volume II",
      authors: "Arthur Conan Doyle/Kyle Freeman",
      average_rating: "4.47",
      isbn: "1593080409",
      isbn13: "9781593080402",
      language_code: "eng",
      "  num_pages": "709",
      ratings_count: "874",
      text_reviews_count: "57",
      publication_date: "10/1/2003",
      publisher: "Barnes  Noble Classics",
    },
    {
      bookID: "13737",
      title: "The Twelve Kingdoms: Sea of Shadow (The Twelve Kingdoms  #1)",
      authors:
        "Fuyumi Ono/\u5c0f\u91ce \u4e0d\u7531\u7f8e/Akihiro Yamada/\u5c71\u7530 \u7ae0\u535a/Elye J. Alexander/Alexander O. Smith",
      average_rating: "4.20",
      isbn: "1598169467",
      isbn13: "9781598169461",
      language_code: "en-US",
      "  num_pages": "464",
      ratings_count: "2504",
      text_reviews_count: "172",
      publication_date: "3/13/2007",
      publisher: "TokyoPop",
    },
    {
      bookID: "26968",
      title: "Quicksand",
      authors: "Nella Larsen",
      average_rating: "3.68",
      isbn: "0486451402",
      isbn13: "9780486451404",
      language_code: "eng",
      "  num_pages": "125",
      ratings_count: "181",
      text_reviews_count: "29",
      publication_date: "9/15/2006",
      publisher: "Dover Publications",
    },
    {
      bookID: "5061",
      title:
        "La verdad acerca de las Industrias Farmac\u00e9uticas: c\u00f3mo nos enga\u00f1a y qu\u00e9 hacer al respecto",
      authors: "Marcia Angell",
      average_rating: "3.95",
      isbn: "9580493510",
      isbn13: "9789580493518",
      language_code: "spa",
      "  num_pages": "324",
      ratings_count: "3",
      text_reviews_count: "0",
      publication_date: "12/1/2006",
      publisher: "Norma",
    },
    {
      bookID: "15174",
      title: "Something Rising",
      authors: "Haven Kimmel",
      average_rating: "3.61",
      isbn: "0743247779",
      isbn13: "9780743247771",
      language_code: "eng",
      "  num_pages": "288",
      ratings_count: "1237",
      text_reviews_count: "154",
      publication_date: "4/5/2005",
      publisher: "Free Press",
    },
    {
      bookID: "15448",
      title: "On a Pale Horse",
      authors: "Piers Anthony",
      average_rating: "4.13",
      isbn: "0345305183",
      isbn13: "9780345305183",
      language_code: "eng",
      "  num_pages": "325",
      ratings_count: "156",
      text_reviews_count: "13",
      publication_date: "9/12/1984",
      publisher: "Del Rey Books",
    },
    {
      bookID: "11494",
      title: "Humboldt's Gift",
      authors: "Saul Bellow",
      average_rating: "3.86",
      isbn: "0140189440",
      isbn13: "9780140189445",
      language_code: "eng",
      "  num_pages": "487",
      ratings_count: "6995",
      text_reviews_count: "378",
      publication_date: "6/1/1996",
      publisher: "Penguin Classics",
    },
    {
      bookID: "21402",
      title: "Pompeii",
      authors: "Robert   Harris/Michael Cumpsty",
      average_rating: "3.82",
      isbn: "0739341774",
      isbn13: "9780739341773",
      language_code: "eng",
      "  num_pages": "0",
      ratings_count: "7",
      text_reviews_count: "1",
      publication_date: "9/5/2006",
      publisher: "Random House Audio",
    },
    {
      bookID: "41304",
      title: "Strangers from a Different Shore: A History of Asian Americans",
      authors: "Ronald Takaki",
      average_rating: "4.13",
      isbn: "0316831301",
      isbn13: "9780316831307",
      language_code: "en-US",
      "  num_pages": "640",
      ratings_count: "888",
      text_reviews_count: "45",
      publication_date: "9/23/1998",
      publisher: "Back Bay Books",
    },
    {
      bookID: "42432",
      title: "God Emperor of Dune (Dune Chronicles #4)",
      authors: "Frank Herbert",
      average_rating: "3.84",
      isbn: "0575075066",
      isbn13: "9780575075061",
      language_code: "eng",
      "  num_pages": "454",
      ratings_count: "51343",
      text_reviews_count: "896",
      publication_date: "3/13/2003",
      publisher: "Victor Gollancz",
    },
    {
      bookID: "17022",
      title: "My Ishmael (Ishmael  #3)",
      authors: "Daniel Quinn",
      average_rating: "4.07",
      isbn: "0553379658",
      isbn13: "9780553379655",
      language_code: "eng",
      "  num_pages": "293",
      ratings_count: "8654",
      text_reviews_count: "412",
      publication_date: "10/6/1998",
      publisher: "Bantam",
    },
    {
      bookID: "23929",
      title: "Selected Letters  1940-1956",
      authors: "Jack Kerouac/Ann Charters",
      average_rating: "4.13",
      isbn: "0140234446",
      isbn13: "9780140234442",
      language_code: "eng",
      "  num_pages": "656",
      ratings_count: "804",
      text_reviews_count: "21",
      publication_date: "3/1/1996",
      publisher: "Penguin (Non-Classics)",
    },
    {
      bookID: "18062",
      title: "The Best of Wodehouse: An Anthology",
      authors: "P.G. Wodehouse/John Mortimer",
      average_rating: "4.41",
      isbn: "0307266613",
      isbn13: "9780307266613",
      language_code: "eng",
      "  num_pages": "840",
      ratings_count: "413",
      text_reviews_count: "46",
      publication_date: "6/19/2007",
      publisher: "Everyman's Library",
    },
    {
      bookID: "17174",
      title: "A Yellow Raft in Blue Water",
      authors: "Michael Dorris",
      average_rating: "3.86",
      isbn: "0312421850",
      isbn13: "9780312421854",
      language_code: "en-US",
      "  num_pages": "372",
      ratings_count: "16190",
      text_reviews_count: "897",
      publication_date: "3/5/2003",
      publisher: "Picador USA",
    },
    {
      bookID: "3368",
      title: "Don't Make Me Think: A Common Sense Approach to Web Usability",
      authors: "Steve Krug",
      average_rating: "4.25",
      isbn: "0321344758",
      isbn13: "9780321344755",
      language_code: "en-US",
      "  num_pages": "201",
      ratings_count: "7736",
      text_reviews_count: "641",
      publication_date: "8/28/2005",
      publisher: "New Riders Publishing",
    },
  ],
};

let books_collection = a.message;
let titles = [];
let authors = [];

for (let i in books_collection) {
  titles.push(books_collection[i].title);
  authors.push(books_collection[i].authors);
  let main_container = document.querySelector(".main_container");

  let div = document.createElement("div");
  div.classList.add("book_cards");
  let h3 = document.createElement("h3");
  h3.classList.add("book_title");
  h3.innerText = titles[i];
  let h5 = document.createElement("h5");
  h5.classList.add("book_author");
  h5.innerText = authors[i];
  let button = document.createElement("button");
  button.classList.add("book_details");
  button.innerText = "Books Details";

  main_container.append(div);
  div.append(h3);
  div.append(h5);
  div.append(button);
}

// =================================================================================  Search Box

let search_box = document.querySelector("#search_bar");
let titles_array = document.querySelectorAll("h3");
let authors_array = document.querySelectorAll("h5");
let book_cards = document.querySelectorAll(".book_cards");

search_box.addEventListener("keydown", (event) => {
  for (let i = 0; i < titles_array.length; i++) {
    if (
      titles_array[i].textContent
        .toUpperCase()
        .indexOf(search_box.value.toUpperCase()) > -1 ||
      authors_array[i].textContent
        .toUpperCase()
        .indexOf(search_box.value.toUpperCase()) > -1
    ) {
      book_cards[i].style.display = " ";
    } else {
      book_cards[i].style.display = "none";
    }
  }
  // }
});
let clear_btn = document.querySelector(".clear_btn");
clear_btn.addEventListener("click", () => {
  book_cards.forEach((e) => {
    e.style.display = "block";
  });
  search_box.value = "";
});

// ============================================================== pop up
let book_borrowed = [];
let main = document.querySelector("main");
let book_details = document.querySelectorAll(".book_details");
book_details.forEach((book, i) => {
  book.addEventListener("click", (event) => {
    // var y = event.offsetY; // Get the horizontal coordinate
    // var y = event.clientY
    // console.log(y);
    // console.log(y)
    let div = document.createElement("div");
    div.classList.add("book_details_pop_up");

    // div.style.top = `${y}rem`;

    let select = document.createElement("select");
    let label = document.createElement("label");
    label.textContent = "issue book to";

    let option1 = document.createElement("option");
    option1.innerText = "Ravi";
    let option2 = document.createElement("option");
    option2.innerText = "Amit";
    let option3 = document.createElement("option");
    option3.innerText = "Vijay";
    let option4 = document.createElement("option");
    option4.innerText = "Rajesh";
    let option5 = document.createElement("option");
    option5.innerText = "Alexander";
    let option6 = document.createElement("option");
    option6.innerText = "Steve";
    let option7 = document.createElement("option");
    option7.innerText = "Adam";
    let option8 = document.createElement("option");
    option8.innerText = "Rahul";
    let option9 = document.createElement("option");
    option9.innerText = " Jason";
    let option10 = document.createElement("option");
    option10.innerText = "Jeremy";

    let button1 = document.createElement("button");
    button1.classList.add("save_popup");
    button1.innerHTML = "Save Popup";
    button1.onclick = (event) => {
      let user_borrowed = select.value;
      let book = i;

      book_borrowed.push({ book, user_borrowed });
      console.log(book_borrowed[0]);

      showTransaction();
    };
    let button2 = document.createElement("button");
    button2.classList.add("close_popup");
    button2.innerHTML = "Close Popup";
    button2.addEventListener("click", () => {
      div.style.display = "none";
    });

    let button_div = document.createElement("div");

    main.append(div);

    div.append(label);
    div.append(select);
    select.append(option1);
    select.append(option2);
    select.append(option3);
    select.append(option4);
    select.append(option5);
    select.append(option6);
    select.append(option7);
    select.append(option8);
    select.append(option9);
    select.append(option10);

    button_div.append(button1);
    button_div.append(button2);
    div.append(button_div);
  });
});

function showTransaction() {
  let div = document.createElement("div");
  let transaction_div = document.querySelector(".transaction_div");
  transaction_div.append(div);
  let h5 = document.createElement("h5");
  let section = document.createElement("section");
  let p = document.createElement("p");

  for (let i in book_borrowed) {
    let position = book_borrowed[i].book;
    h5.innerHTML = books_collection[position].title;
    p.innerHTML = "Book Borrowed by " + book_borrowed[i].user_borrowed;

  }
  div.append(section);
  section.appendChild(h5);
  section.appendChild(p);
}
let heading_calculate =document.querySelector(".heading_calculate");
let calculate_fees = document.querySelector('#calculate_fees');
let count =0;
calculate_fees.addEventListener('click',()=>{
count++;
if(count==1){


  let label1 = document.createElement("label");
  label1.textContent ="Enter Book Charge"
  let label2 = document.createElement("label");
  label2.textContent ="Enter No of Days";
  let input1 = document.createElement("input");
 
  let input2 = document.createElement("input");

  let button = document.createElement('button');

  heading_calculate.appendChild(label1)
  heading_calculate.appendChild(input1)
  heading_calculate.appendChild(label2)
  heading_calculate.appendChild(input2)
  heading_calculate.appendChild(button)
  count++;
  let temp =0;
  button.onclick = ()=>{
    temp++;
    if(temp==1){

    

  let charge =input1.value;
  let days =input2.value;
  total_charge = charge*days;
  let h2 = document.createElement("h2");
  h2.innerHTML=total_charge;
  heading_calculate.appendChild(h2)
  console.log(total_charge)}
  }}
})